# TACN v2.0 Production Deployment Configuration
#
# This file contains production-ready environment variables
# Copy this to .env.production and customize for your environment

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================
APP_NAME=tacn
APP_VERSION=2.0.0
APP_ENV=production
DEBUG=false

# Server Configuration
HOST=0.0.0.0
PORT=8000
WORKERS=4
LOG_LEVEL=INFO

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
MONGODB_HOST=mongodb
MONGODB_PORT=27017
MONGODB_DATABASE=tacn_production
MONGODB_USERNAME=tacn_user
MONGODB_PASSWORD=your_mongodb_password_here
MONGODB_AUTH_SOURCE=admin
MONGODB_MAX_POOL_SIZE=100
MONGODB_MIN_POOL_SIZE=10

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=your_redis_password_here
REDIS_MAX_CONNECTIONS=50

# ============================================================================
# CACHE CONFIGURATION (Phase 3)
# ============================================================================
CACHE_ENABLED=true
CACHE_TTL=3600
CACHE_L1_ENABLED=true   # Memory cache
CACHE_L2_ENABLED=true   # Redis cache
CACHE_L3_ENABLED=false  # File cache (disabled in prod)
CACHE_MAX_SIZE=10000

# ============================================================================
# PERFORMANCE MONITORING (Phase 3)
# ============================================================================
PERFORMANCE_MONITORING_ENABLED=true
PERFORMANCE_MONITORING_PERCENTILES=true
SLOW_QUERY_THRESHOLD=1000    # 1 second
VERY_SLOW_QUERY_THRESHOLD=3000  # 3 seconds

# ============================================================================
# TYPESCRIPT SERVICES (Phase 2)
# ============================================================================
TS_SERVICES_ENABLED=true
TS_SERVICES_HOST=localhost
TS_SERVICES_PORT=3001
TS_SERVICES_WORKERS=2

# ============================================================================
# RUST ACCELERATION MODULES (Phase 3)
# ============================================================================
RUST_MODULES_ENABLED=true
RUST_AUTO_FALLBACK=true

# ============================================================================
# API CONFIGURATION
# ============================================================================
API_V1_ENABLED=true      # Backward compatibility
API_V2_ENABLED=true      # New v2 endpoints
CORS_ORIGINS=https://yourdomain.com,https://app.yourdomain.com

# ============================================================================
# SECURITY
# ============================================================================
SECRET_KEY=your_secret_key_here_min_32_characters
JWT_SECRET_KEY=your_jwt_secret_here
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_PER_HOUR=1000

# ============================================================================
# LOGGING
# ============================================================================
LOG_FORMAT=json
LOG_DIR=/var/log/tacn
LOG_ROTATION=true
LOG_RETENTION_DAYS=30

# ============================================================================
# DATA SOURCES
# ============================================================================
# AKShare (Free, no API key required)
AKSHARE_ENABLED=true

# Tushare Pro (Requires API token)
TUSHARE_ENABLED=false
TUSHARE_TOKEN=your_tushare_token_here
TUSHARE_PRO_RATE_LIMIT=1000

# BaoStock (Free account available)
BAOSTOCK_ENABLED=true
BAOSTOCK_USERNAME=your_baostock_username
BAOSTOCK_PASSWORD=your_baostock_password

# ============================================================================
# LLM CONFIGURATION
# ============================================================================
# Default LLM provider
DEFAULT_LLM_PROVIDER=openai

# OpenAI
OPENAI_API_KEY=your_openai_api_key
OPENAI_MODEL=gpt-4
OPENAI_BASE_URL=https://api.openai.com/v1

# Azure OpenAI
AZURE_OPENAI_ENABLED=false
AZURE_OPENAI_API_KEY=your_azure_api_key
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com
AZURE_OPENAI_DEPLOYMENT=gpt-4

# Anthropic Claude
ANTHROPIC_API_KEY=your_anthropic_api_key
ANTHROPIC_MODEL=claude-3-opus-20240229

# Local LLM (Ollama)
LOCAL_LLM_ENABLED=false
LOCAL_LLM_BASE_URL=http://localhost:11434
LOCAL_LLM_MODEL=llama2

# ============================================================================
# SCHEDULER CONFIGURATION
# ============================================================================
# Sync scheduling
SYNC_STOCK_BASICS_ENABLED=true
SYNC_STOCK_BASICS_TIME=06:30
SYNC_STOCK_BASICS_CRON=0 6 30 * * *

# Quotes ingestion
QUOTES_INGEST_ENABLED=true
QUOTES_INGEST_INTERVAL_SECONDS=30
QUOTES_BACKFILL_ON_STARTUP=true

# News sync
NEWS_SYNC_ENABLED=true
NEWS_SYNC_TIME=08:00
NEWS_SYNC_CRON=0 8 * * *
NEWS_SYNC_MAX_PER_SOURCE=50

# ============================================================================
# MONITORING ALERTS
# ============================================================================
# Error rate alert threshold
ERROR_RATE_ALERT_THRESHOLD=0.05

# Response time alert threshold (milliseconds)
RESPONSE_TIME_ALERT_THRESHOLD=1000

# Alert email
ALERT_EMAIL_ENABLED=false
ALERT_EMAIL_TO=ops@yourcompany.com
ALERT_EMAIL_FROM=noreply@yourcompany.com
SMTP_HOST=smtp.yourcompany.com
SMTP_PORT=587
SMTP_USERNAME=your_smtp_username
SMTP_PASSWORD=your_smtp_password

# ============================================================================
# DOCKER DEPLOYMENT
# ============================================================================
# Compose project name
COMPOSE_PROJECT_NAME=tacn_production

# Container images
IMAGE_FRONTEND=tacn/frontend:v2.0.0
IMAGE_BACKEND=tacn/backend:v2.0.0
IMAGE_NGINX=tacn/nginx:v2.0.0

# Volume paths
VOLUME_DATA=/var/lib/tacn/data
VOLUME_LOGS=/var/log/tacn
VOLUME_UPLOADS=/var/lib/tacn/uploads

# ============================================================================
# FEATURE FLAGS
# ============================================================================
FEATURE_DAILY_ANALYSIS=true
FEATURE_NEWS_ANALYSIS=true
FEATURE_BATCH_QUEUE=true
FEATURE_WATCHLIST=true
FEATURE_TREND_ANALYSIS=true

# ============================================================================
# MAINTENANCE MODE
# ============================================================================
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="System under maintenance. Please try again later."

# ============================================================================
# PROMETHEUS METRICS (Optional)
# ============================================================================
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION=15d

# ============================================================================
# BACKUP CONFIGURATION
# ============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=your-backup-bucket
BACKUP_S3_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
